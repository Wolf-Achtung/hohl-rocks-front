import { $, el, toast } from './utils.js';
function ensureModalHost(){ let host = $('#modal'); if (!host){ host = el('section', { id:'modal', class:'modal','aria-hidden':'true',role:'dialog','aria-modal':'true','aria-label':'Overlay' }, el('div',{class:'modal__panel',tabindex:'-1'}, el('div',{class:'modal__toolbar'}, el('button',{class:'ui btn','data-copy':'modal',type:'button'},'Kopieren'), el('button',{class:'ui btn ghost modal__close','aria-label':'Schließen',type:'button'},'Schließen') ), el('div',{id:'modal-content'}) )); document.body.append(host); } return host; }
export function openModal({ title='Dialog', html='' } = {}){ const host = ensureModalHost(); const panel = host.querySelector('.modal__panel'); const box = $('#modal-content', host); box.innerHTML = html; host.dataset.open='1'; host.setAttribute('aria-hidden','false'); panel?.focus(); host.addEventListener('click', (e)=>{ if (e.target.closest('.modal__close') || e.target === host){ closeModal(); } }, { once:true }); return { close: closeModal }; }
export function closeModal(){ const host = $('#modal'); if (!host) return; delete host.dataset.open; host.setAttribute('aria-hidden','true'); }
export function modalHtmlForForm(item){ const id = item?.id || 'form'; return `<form data-form="${id}"><div class="form-row"><label>Text</label><textarea name="text" rows="5" style="width:100%"></textarea></div><div class="form-row"><label>Datei (optional)</label><input type="file" name="file"/></div><div class="form-row"><button class="ui btn" type="submit">Start</button></div><div class="result" style="margin-top:10px"></div></form>`; }
export { toast };
