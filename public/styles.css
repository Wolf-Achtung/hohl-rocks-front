:root{
  --z-bg: 0; --z-bubbles: 1; --z-labels: 2; --z-ui: 10; --z-modal: 100; --z-tour: 120;
  --hue-primary: 200; --hue-accent: 320; --neon-strength: .65;
  --fg: #e8f0ff; --muted: #9bb0c3; --glow: hsla(var(--hue-primary), 90%, 70%, var(--neon-strength));
  --backdrop: rgba(8, 12, 20, .6);
  --chip-bg: rgba(255,255,255,.08); --chip-bg-hover: rgba(255,255,255,.14);
}

*{ box-sizing:border-box }
html,body{ height:100%; margin:0; color:var(--fg); background:#05070a;
  font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, sans-serif;
  overflow:hidden;
}

/* Background */
.bg{ position:fixed; inset:0; width:100%; height:100%; object-fit:cover; z-index:var(--z-bg);
  filter:brightness(.6) saturate(.95); pointer-events:none; }

/* Canvas layer */
#bubbles{ position:fixed; inset:0; width:100%; height:100%; z-index:var(--z-bubbles); pointer-events:none; }
#bubble-labels{ position:fixed; inset:0; z-index:var(--z-labels); list-style:none; margin:0; padding:0; pointer-events:none; }
#bubble-labels li{ position:absolute; transform:translate(-50%,-50%); background:rgba(0,0,0,.35); color:#fff; padding:8px 12px;
  border-radius:999px; font-weight:700; font-size:13px; backdrop-filter: blur(8px);
  text-shadow: 0 1px 2px rgba(0,0,0,.8); white-space:nowrap; pointer-events:none; opacity:.95;
  border:1px solid rgba(255,255,255,.10); }

/* Header */
.site-header{ position:fixed; left:0; right:0; top:0; z-index:var(--z-ui); display:flex; justify-content:center; padding:16px 20px; }
.site-nav{ display:flex; gap:12px; align-items:center; backdrop-filter: blur(6px);
  background: color-mix(in srgb, var(--backdrop) 80%, transparent); padding:8px 12px; border-radius:999px; box-shadow: 0 0 30px var(--glow); }
.nav-btn{ appearance:none; border:0; border-radius:999px; padding:8px 14px; color:var(--fg); background:var(--chip-bg);
  font-weight:600; letter-spacing:.01em; cursor:pointer; transition: transform .1s ease, background .2s ease, box-shadow .2s ease; }
.nav-btn:focus-visible{ outline:2px solid var(--glow) }
.nav-btn:hover{ transform:translateY(-1px); background:var(--chip-bg-hover) }
.nav-btn:active{ transform:translateY(0) }
.nav-btn.gear{ font-size:18px; padding:6px 10px; }

/* Hero */
.hero{ position:fixed; inset:auto 0 8vh 0; top:18vh; z-index:var(--z-ui); text-align:center; pointer-events:none; }
.hero h1{ font-size:clamp(48px, 10vw, 108px); margin:0 0 6px; letter-spacing:.01em;
  text-shadow: 0 0 22px var(--glow), 0 0 2px rgba(255,255,255,.4); }

/* Bottom dock */
.dock{ position:fixed; bottom:18px; left:0; right:0; display:flex; justify-content:center; gap:10px; z-index:var(--z-ui); }
.chip{ appearance:none; border:0; border-radius:999px; padding:10px 14px; font-weight:700; cursor:pointer; background:var(--chip-bg); color:var(--fg); }
.chip:hover{ background:var(--chip-bg-hover); transform: translateY(-1px); }

/* Modal */
.modal{ position:fixed; inset:0; display:grid; place-items:center; z-index:var(--z-modal); background: rgba(0,0,0,.35);
  opacity:0; transform:translateY(6px); transition: opacity .18s ease, transform .18s ease; pointer-events:none; }
.modal[aria-hidden="false"]{ opacity:1; transform:none; pointer-events:auto; }
.modal__panel{ width:min(92vw, 980px); max-height:80vh; overflow:auto; background: rgba(10,16,24,.82); backdrop-filter: blur(14px);
  border:1px solid rgba(255,255,255,.12); border-radius:16px; padding:18px; box-shadow: 0 20px 80px rgba(0,0,0,.55), 0 0 60px var(--glow); outline: none; }
.modal__toolbar{ display:flex; gap:8px; justify-content:flex-end; margin-bottom:8px; }
.ui.btn{ appearance:none; border:0; padding:8px 12px; border-radius:10px; background:var(--chip-bg); color:var(--fg); font-weight:600; cursor:pointer; }
.ui.btn.ghost{ background:transparent; border:1px solid rgba(255,255,255,.2); }
.ui.btn:hover{ background:var(--chip-bg-hover); }

/* Onboarding */
.tour{ position:fixed; inset:0; z-index:var(--z-tour); background: rgba(0,0,0,.5); display:grid; place-items:center;
  opacity:0; transform:translateY(6px); pointer-events:none; transition: opacity .18s ease, transform .18s ease; }
.tour[aria-hidden="false"]{ opacity:1; transform:none; pointer-events:auto; }
.tour__panel{ background: rgba(10,16,24,.88); color:var(--fg); border:1px solid rgba(255,255,255,.12); border-radius:14px; padding:18px; width:min(92vw, 680px); box-shadow: 0 20px 80px rgba(0,0,0,.55), 0 0 60px var(--glow); }
.tour__panel ol{ margin-left:18px; }
.tour__actions{ display:flex; gap:8px; justify-content:flex-end; margin-top:10px; }

/* Helper & hint */
.helper{ position:fixed; right:14px; bottom:56px; z-index:var(--z-ui); padding:10px 12px; border-radius:12px;
  background: rgba(0,0,0,.35); backdrop-filter: blur(6px); color:var(--fg); font-size:13px; box-shadow: 0 0 20px var(--glow);
  opacity:0; transform:translateY(4px); transition: opacity .25s ease, transform .25s ease; pointer-events:none; }
.helper.show{ opacity:1; transform:none; }
.shortcut-hint{ position:fixed; right:14px; bottom:12px; z-index:var(--z-ui); color: var(--muted); font-size:12px;
  background: rgba(0,0,0,.35); padding:6px 8px; border-radius:8px; opacity:0; transform:translateY(4px);
  transition: opacity .2s ease, transform .2s ease; pointer-events:none; }
.shortcut-hint.show{ opacity:1; transform:none; }

/* Content helpers */
pre{ white-space:pre-wrap; word-wrap:break-word; background: rgba(255,255,255,.04); padding:10px; border-radius:10px; }
ul.news{ padding-left: 18px; }
a{ color: #9cd1ff; }
kbd{ background:#111; border:1px solid rgba(255,255,255,.2); border-bottom-color:rgba(0,0,0,.6); padding:2px 4px; border-radius:4px; font-family:ui-monospace, SFMono-Regular, Menlo, monospace; font-size:12px; }
form.settings label{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin:6px 0; }
form.settings fieldset{ border:1px solid rgba(255,255,255,.12); border-radius:10px; padding:6px 10px; margin-top:8px; }
.star{ cursor:pointer; margin-left:6px; user-select:none; }
.star.on{ filter: drop-shadow(0 0 6px var(--glow)); }
.filter-chips{ display:flex; gap:8px; margin:8px 0; flex-wrap:wrap; }
.filter-chips .ui.btn.active{ box-shadow:0 0 0 2px var(--glow) inset; }
